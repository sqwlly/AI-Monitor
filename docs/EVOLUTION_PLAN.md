# Claude Monitor æ™ºèƒ½ä½“è¿›åŒ–è·¯çº¿å›¾

> ä»"ååº”å¼ç›‘å·¥"åˆ°"è‡ªä¸»æ™ºèƒ½ä½“"çš„å®Œæ•´å‡çº§è®¡åˆ’
>
> æ–¹æ³•è®ºï¼šDFSï¼ˆæ·±åº¦ä¼˜å…ˆï¼‰ - æ¯ä¸ªèƒ½åŠ›æ¨¡å—å®Œæ•´å®ç°åå†è¿›å…¥ä¸‹ä¸€ä¸ª

---

## ç›®å½•

1. [å½“å‰çŠ¶æ€è¯„ä¼°](#1-å½“å‰çŠ¶æ€è¯„ä¼°)
2. [ç›®æ ‡æ¶æ„](#2-ç›®æ ‡æ¶æ„)
3. [Phase 1: ç›®æ ‡ç†è§£ç³»ç»Ÿ](#phase-1-ç›®æ ‡ç†è§£ç³»ç»Ÿ)
4. [Phase 2: è¯­ä¹‰ç†è§£å¼•æ“](#phase-2-è¯­ä¹‰ç†è§£å¼•æ“)
5. [Phase 3: é•¿ç¨‹æ¨ç†ç³»ç»Ÿ](#phase-3-é•¿ç¨‹æ¨ç†ç³»ç»Ÿ)
6. [Phase 4: å­¦ä¹ ä¸é€‚åº”](#phase-4-å­¦ä¹ ä¸é€‚åº”)
7. [Phase 5: ä¸»åŠ¨è§„åˆ’èƒ½åŠ›](#phase-5-ä¸»åŠ¨è§„åˆ’èƒ½åŠ›)
8. [Phase 6: å·¥å…·ä½¿ç”¨æ‰©å±•](#phase-6-å·¥å…·ä½¿ç”¨æ‰©å±•)
9. [Phase 7: äººæœºåä½œå¢å¼º](#phase-7-äººæœºåä½œå¢å¼º)
10. [å®æ–½ä¼˜å…ˆçº§çŸ©é˜µ](#å®æ–½ä¼˜å…ˆçº§çŸ©é˜µ)

---

## 1. å½“å‰çŠ¶æ€è¯„ä¼°

### 1.1 å·²å®ç°èƒ½åŠ›

```
âœ… åŸºç¡€ç›‘æ§å¾ªç¯ï¼ˆsmart-monitor.shï¼‰
âœ… LLM å†³ç­–å¼•æ“ï¼ˆllm_supervisor.pyï¼‰
âœ… å¤šè§’è‰² Prompt ç³»ç»Ÿï¼ˆprompts/*.txtï¼‰
âœ… é˜¶æ®µæ£€æµ‹ï¼ˆscore_stage_from_outputï¼‰
âœ… ä»»åŠ¡è®°å¿†ï¼ˆmemory_manager.py + SQLiteï¼‰
âœ… è‡ªæˆ‘è¯„ä¼°ï¼ˆquality_assessor.pyï¼‰
âœ… æ¡Œé¢é€šçŸ¥ï¼ˆnotification_hub.pyï¼‰
âœ… å¤šAgentç¼–æ’ï¼ˆagent_orchestrator.pyï¼‰
âœ… é¡¹ç›®ä¸Šä¸‹æ–‡é‡‡é›†ï¼ˆproject_context.shï¼‰
âœ… åŠ¨æ€ Temperature è°ƒæ•´
âœ… å†å²å†³ç­–æ³¨å…¥
```

### 1.2 èƒ½åŠ›ç¼ºå£åˆ†æ

| ç»´åº¦ | å½“å‰æ°´å¹³ | ç›®æ ‡æ°´å¹³ | å·®è· |
|------|----------|----------|------|
| ç›®æ ‡ç†è§£ | 0% - æ—  | 80% - ç†è§£ä»»åŠ¡æ„å›¾ | ğŸ”´ å…³é”® |
| è¯­ä¹‰ç†è§£ | 10% - å…³é”®è¯åŒ¹é… | 70% - ç†è§£ä»£ç /é”™è¯¯å«ä¹‰ | ğŸ”´ å…³é”® |
| é•¿ç¨‹æ¨ç† | 5% - 50è¡Œä¸Šä¸‹æ–‡ | 60% - è·¨ä¼šè¯å…³è” | ğŸŸ¡ é‡è¦ |
| å­¦ä¹ èƒ½åŠ› | 5% - ä»…è®°å½• | 50% - æ¨¡å¼æå–å¤ç”¨ | ğŸŸ¡ é‡è¦ |
| ä¸»åŠ¨è§„åˆ’ | 10% - è¢«åŠ¨å“åº” | 60% - ä¸»åŠ¨å¹²é¢„çº å | ğŸŸ¡ é‡è¦ |
| å·¥å…·ä½¿ç”¨ | 5% - ä»…æ–‡æœ¬å‘½ä»¤ | 50% - å¤šå·¥å…·åè°ƒ | ğŸŸ¢ å¢å¼º |
| äººæœºåä½œ | 20% - é€šçŸ¥ | 60% - åå•†å¯¹è¯ | ğŸŸ¢ å¢å¼º |

---

## 2. ç›®æ ‡æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ™ºèƒ½ä½“æ§åˆ¶å±‚                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ ç›®æ ‡ç®¡ç†å™¨  â”‚  â”‚ è§„åˆ’å¼•æ“   â”‚  â”‚ å†³ç­–ä»²è£å™¨  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â–¼                â–¼                â–¼       ç†è§£å±‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ æ„å›¾è§£æå™¨  â”‚  â”‚ è¯­ä¹‰åˆ†æå™¨  â”‚  â”‚ å› æœæ¨ç†å™¨  â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â–¼                â–¼                â–¼       è®°å¿†å±‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ å·¥ä½œè®°å¿†    â”‚  â”‚ æƒ…æ™¯è®°å¿†   â”‚  â”‚ æ¨¡å¼è®°å¿†    â”‚             â”‚
â”‚  â”‚ (å½“å‰ä»»åŠ¡) â”‚  â”‚ (å†å²ä¼šè¯) â”‚  â”‚ (å­¦ä¹ ç»éªŒ) â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â–¼                â–¼                â–¼       æ‰§è¡Œå±‚         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ å‘½ä»¤ç”Ÿæˆå™¨  â”‚  â”‚ å·¥å…·è°ƒç”¨å™¨  â”‚  â”‚ äººæœºæ¥å£    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phase 1: ç›®æ ‡ç†è§£ç³»ç»Ÿ

> **ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜
> **é¢„è®¡å·¥æœŸ**: 2-3 å‘¨
> **ä¾èµ–**: æ— 

### 1.1 ä»»åŠ¡æ„å›¾è§£æå™¨

**æ–‡ä»¶**: `intent_parser.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 1.1.1 ä»»åŠ¡å£°æ˜æ•è·
â”‚   â”œâ”€â”€ ç›‘å¬ç‰¹å®šæ¨¡å¼ï¼š"æˆ‘è¦å®ç°..."ã€"å¸®æˆ‘..."ã€"è¯·..."
â”‚   â”œâ”€â”€ ä» git commit message æå–æ„å›¾
â”‚   â”œâ”€â”€ ä» TODO æ³¨é‡Šæå–æ„å›¾
â”‚   â””â”€â”€ ä»å¯¹è¯å†å²æå–éšå«æ„å›¾
â”‚
â”œâ”€â”€ 1.1.2 æ„å›¾ç»“æ„åŒ–
â”‚   â”œâ”€â”€ è§£æä¸º: {action, target, constraints, success_criteria}
â”‚   â”œâ”€â”€ ç¤ºä¾‹: "å®ç°ç”¨æˆ·ç™»å½•" â†’ {action:"implement", target:"user_login", ...}
â”‚   â””â”€â”€ æ”¯æŒå¤šçº§æ„å›¾åˆ†è§£
â”‚
â”œâ”€â”€ 1.1.3 æ„å›¾æŒä¹…åŒ–
â”‚   â”œâ”€â”€ å­˜å‚¨åˆ° SQLite: intents è¡¨
â”‚   â”œâ”€â”€ å…³è” session_id
â”‚   â””â”€â”€ æ”¯æŒæ„å›¾æ›´æ–°/åºŸå¼ƒ
â”‚
â””â”€â”€ 1.1.4 æ„å›¾æŸ¥è¯¢æ¥å£
    â”œâ”€â”€ get_current_intent(session_id) â†’ Intent
    â”œâ”€â”€ get_intent_history(session_id) â†’ List[Intent]
    â””â”€â”€ update_intent_status(intent_id, status)
```

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE intents (
    intent_id TEXT PRIMARY KEY,
    session_id TEXT NOT NULL,
    raw_text TEXT,                    -- åŸå§‹è¡¨è¿°
    action TEXT,                      -- åŠ¨ä½œç±»å‹: implement/fix/refactor/test/...
    target TEXT,                      -- ç›®æ ‡å¯¹è±¡
    constraints TEXT,                 -- çº¦æŸæ¡ä»¶ (JSON)
    success_criteria TEXT,            -- æˆåŠŸæ ‡å‡† (JSON)
    status TEXT DEFAULT 'active',     -- active/completed/abandoned
    confidence REAL DEFAULT 0.5,      -- è§£æç½®ä¿¡åº¦
    created_at INTEGER,
    completed_at INTEGER,
    FOREIGN KEY (session_id) REFERENCES sessions(session_id)
);
```

### 1.2 ç›®æ ‡åˆ†è§£å¼•æ“

**æ–‡ä»¶**: `goal_decomposer.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 1.2.1 ç›®æ ‡å±‚æ¬¡ç»“æ„
â”‚   â”œâ”€â”€ Goal (é¡¶å±‚ç›®æ ‡)
â”‚   â”‚   â”œâ”€â”€ Milestone (é‡Œç¨‹ç¢‘)
â”‚   â”‚   â”‚   â”œâ”€â”€ Task (å…·ä½“ä»»åŠ¡)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Step (æ‰§è¡Œæ­¥éª¤)
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ æ”¯æŒåŠ¨æ€è°ƒæ•´å±‚æ¬¡
â”‚
â”œâ”€â”€ 1.2.2 è‡ªåŠ¨åˆ†è§£ç­–ç•¥
â”‚   â”œâ”€â”€ åŸºäºæ¨¡æ¿åˆ†è§£ (å¸¸è§ä»»åŠ¡æœ‰é¢„è®¾åˆ†è§£)
â”‚   â”œâ”€â”€ LLM è¾…åŠ©åˆ†è§£ (å¤æ‚ä»»åŠ¡è¯·æ±‚ LLM)
â”‚   â””â”€â”€ å†å²æ¨¡å¼åŒ¹é… (ç›¸ä¼¼ä»»åŠ¡å¤ç”¨åˆ†è§£)
â”‚
â”œâ”€â”€ 1.2.3 ä¾èµ–å…³ç³»ç®¡ç†
â”‚   â”œâ”€â”€ ä»»åŠ¡é—´ä¾èµ–: task_a â†’ task_b
â”‚   â”œâ”€â”€ å¤–éƒ¨ä¾èµ–: needs_api_key, needs_database
â”‚   â””â”€â”€ é˜»å¡æ£€æµ‹: å“ªäº›ä»»åŠ¡è¢«é˜»å¡
â”‚
â””â”€â”€ 1.2.4 è¿›åº¦è¿½è¸ª
    â”œâ”€â”€ æ¯ä¸ªå±‚çº§çš„å®Œæˆç™¾åˆ†æ¯”
    â”œâ”€â”€ é¢„è®¡å‰©ä½™æ—¶é—´
    â””â”€â”€ å…³é”®è·¯å¾„è¯†åˆ«
```

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE goals (
    goal_id TEXT PRIMARY KEY,
    intent_id TEXT,
    parent_id TEXT,                   -- çˆ¶ç›®æ ‡ (NULL ä¸ºé¡¶å±‚)
    level TEXT,                       -- goal/milestone/task/step
    title TEXT NOT NULL,
    description TEXT,
    status TEXT DEFAULT 'pending',    -- pending/in_progress/completed/blocked/failed
    progress REAL DEFAULT 0,          -- 0.0 - 1.0
    dependencies TEXT,                -- JSON: ["goal_id_1", "goal_id_2"]
    created_at INTEGER,
    started_at INTEGER,
    completed_at INTEGER,
    FOREIGN KEY (intent_id) REFERENCES intents(intent_id)
);
```

### 1.3 è¿›åº¦ç›‘æ§å™¨

**æ–‡ä»¶**: `progress_monitor.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 1.3.1 å®Œæˆåº¦æ£€æµ‹
â”‚   â”œâ”€â”€ åŸºäºè¾“å‡ºæ¨¡å¼: "âœ“ Test passed", "Build successful"
â”‚   â”œâ”€â”€ åŸºäºæ–‡ä»¶å˜åŒ–: æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶ä¸ç›®æ ‡å…³è”
â”‚   â””â”€â”€ åŸºäº LLM åˆ¤æ–­: è¯¢é—®"è¿™ä¸ªä»»åŠ¡å®Œæˆäº†å—ï¼Ÿ"
â”‚
â”œâ”€â”€ 1.3.2 åç¦»æ£€æµ‹
â”‚   â”œâ”€â”€ æ£€æµ‹å½“å‰æ´»åŠ¨æ˜¯å¦ä¸ç›®æ ‡ç›¸å…³
â”‚   â”œâ”€â”€ è®¡ç®—åç¦»åº¦ (0-100%)
â”‚   â””â”€â”€ è§¦å‘çº åå»ºè®®
â”‚
â”œâ”€â”€ 1.3.3 é˜»å¡è¯†åˆ«
â”‚   â”œâ”€â”€ é•¿æ—¶é—´æ— è¿›å±• (å¯é…ç½®é˜ˆå€¼)
â”‚   â”œâ”€â”€ é”™è¯¯å¾ªç¯ (åŒä¸€é”™è¯¯ N æ¬¡)
â”‚   â””â”€â”€ ä¾èµ–æœªæ»¡è¶³
â”‚
â””â”€â”€ 1.3.4 è¿›åº¦æŠ¥å‘Šç”Ÿæˆ
    â”œâ”€â”€ å®æ—¶è¿›åº¦æ¡ (æ³¨å…¥åˆ° LLM ä¸Šä¸‹æ–‡)
    â”œâ”€â”€ å®šæœŸæ‘˜è¦ (æ¯ N åˆ†é’Ÿ)
    â””â”€â”€ å®ŒæˆæŠ¥å‘Š (ä»»åŠ¡ç»“æŸæ—¶)
```

### 1.4 é›†æˆç‚¹

**ä¿®æ”¹æ–‡ä»¶**: `smart-monitor.sh`

```bash
# åœ¨ decide_response_llm() ä¸­æ³¨å…¥ç›®æ ‡ä¸Šä¸‹æ–‡
goal_context=$(python3 "${script_dir}/goal_decomposer.py" status "$SESSION_ID" 2>/dev/null)
if [ -n "$goal_context" ]; then
    meta_block+=$'\n'"[goal] ${goal_context}"$'\n'
fi

# æ£€æµ‹æ„å›¾
if [ "$idle_duration" -ge 30 ]; then
    python3 "${script_dir}/intent_parser.py" detect "$SESSION_ID" "$current_output" 2>/dev/null
fi
```

---

## Phase 2: è¯­ä¹‰ç†è§£å¼•æ“

> **ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜
> **é¢„è®¡å·¥æœŸ**: 3-4 å‘¨
> **ä¾èµ–**: Phase 1 (éƒ¨åˆ†)

### 2.1 é”™è¯¯è¯­ä¹‰åˆ†æå™¨

**æ–‡ä»¶**: `error_analyzer.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 2.1.1 é”™è¯¯åˆ†ç±»
â”‚   â”œâ”€â”€ è¯­æ³•é”™è¯¯ (SyntaxError, ParseError)
â”‚   â”œâ”€â”€ è¿è¡Œæ—¶é”™è¯¯ (RuntimeError, Exception)
â”‚   â”œâ”€â”€ ä¾èµ–é”™è¯¯ (ImportError, ModuleNotFound)
â”‚   â”œâ”€â”€ é…ç½®é”™è¯¯ (FileNotFound, PermissionDenied)
â”‚   â”œâ”€â”€ ç½‘ç»œé”™è¯¯ (ConnectionError, Timeout)
â”‚   â””â”€â”€ ä¸šåŠ¡é€»è¾‘é”™è¯¯ (AssertionError, ValidationError)
â”‚
â”œâ”€â”€ 2.1.2 æ ¹å› æ¨æ–­
â”‚   â”œâ”€â”€ å †æ ˆè¿½è¸ªè§£æ
â”‚   â”œâ”€â”€ é”™è¯¯æ¶ˆæ¯è¯­ä¹‰æå–
â”‚   â”œâ”€â”€ ä¸Šä¸‹æ–‡å…³è” (æœ€è¿‘çš„ä»£ç æ”¹åŠ¨)
â”‚   â””â”€â”€ å†å²ç›¸ä¼¼é”™è¯¯åŒ¹é…
â”‚
â”œâ”€â”€ 2.1.3 ä¿®å¤å»ºè®®ç”Ÿæˆ
â”‚   â”œâ”€â”€ åŸºäºé”™è¯¯ç±»å‹çš„æ¨¡æ¿å»ºè®®
â”‚   â”œâ”€â”€ åŸºäºå†å²æˆåŠŸä¿®å¤çš„å»ºè®®
â”‚   â””â”€â”€ LLM ç”Ÿæˆçš„é’ˆå¯¹æ€§å»ºè®®
â”‚
â””â”€â”€ 2.1.4 ä¿®å¤éªŒè¯
    â”œâ”€â”€ é¢„æµ‹ä¿®å¤ååº”è¯¥çœ‹åˆ°ä»€ä¹ˆ
    â”œâ”€â”€ éªŒè¯ä¿®å¤æ˜¯å¦æˆåŠŸ
    â””â”€â”€ è®°å½•ä¿®å¤æ¨¡å¼
```

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE error_analysis (
    error_id TEXT PRIMARY KEY,
    session_id TEXT,
    raw_error TEXT,
    error_type TEXT,                  -- syntax/runtime/dependency/config/network/logic
    error_signature TEXT,             -- é”™è¯¯ç‰¹å¾ç­¾å (ç”¨äºåŒ¹é…)
    root_cause TEXT,                  -- æ¨æ–­çš„æ ¹å› 
    related_files TEXT,               -- JSON: ç›¸å…³æ–‡ä»¶åˆ—è¡¨
    suggested_fixes TEXT,             -- JSON: å»ºè®®ä¿®å¤æ–¹æ¡ˆåˆ—è¡¨
    applied_fix TEXT,                 -- å®é™…é‡‡ç”¨çš„ä¿®å¤
    fix_result TEXT,                  -- success/failed/partial
    created_at INTEGER,
    resolved_at INTEGER
);
```

### 2.2 ä»£ç å˜æ›´ç†è§£å™¨

**æ–‡ä»¶**: `change_analyzer.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 2.2.1 å˜æ›´æ•è·
â”‚   â”œâ”€â”€ ç›‘å¬ git diff è¾“å‡º
â”‚   â”œâ”€â”€ è§£æ patch æ ¼å¼
â”‚   â””â”€â”€ è¯†åˆ«å˜æ›´ç±»å‹ (add/modify/delete/rename)
â”‚
â”œâ”€â”€ 2.2.2 å˜æ›´è¯­ä¹‰åˆ†æ
â”‚   â”œâ”€â”€ å‡½æ•°/ç±»çº§åˆ«çš„å˜æ›´æ‘˜è¦
â”‚   â”œâ”€â”€ å˜æ›´å½±å“èŒƒå›´è¯„ä¼°
â”‚   â””â”€â”€ ç ´åæ€§å˜æ›´æ£€æµ‹
â”‚
â”œâ”€â”€ 2.2.3 å˜æ›´ä¸ç›®æ ‡å…³è”
â”‚   â”œâ”€â”€ è¿™ä¸ªå˜æ›´æœåŠ¡äºå“ªä¸ªç›®æ ‡ï¼Ÿ
â”‚   â”œâ”€â”€ å˜æ›´æ˜¯å¦åç¦»ç›®æ ‡ï¼Ÿ
â”‚   â””â”€â”€ å˜æ›´å®Œæˆåº¦è¯„ä¼°
â”‚
â””â”€â”€ 2.2.4 å˜æ›´å†å²è¿½è¸ª
    â”œâ”€â”€ æ—¶é—´çº¿é‡å»º
    â”œâ”€â”€ å›æ»šç‚¹è¯†åˆ«
    â””â”€â”€ å˜æ›´å› æœé“¾
```

### 2.3 è¾“å‡ºæ¨¡å¼è¯†åˆ«å™¨

**æ–‡ä»¶**: `output_recognizer.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 2.3.1 ç»“æ„åŒ–è¾“å‡ºè§£æ
â”‚   â”œâ”€â”€ JSON/YAML è¾“å‡ºæå–
â”‚   â”œâ”€â”€ è¡¨æ ¼è¾“å‡ºè§£æ
â”‚   â””â”€â”€ åˆ—è¡¨/æšä¸¾è§£æ
â”‚
â”œâ”€â”€ 2.3.2 è¿›åº¦æŒ‡ç¤ºå™¨è¯†åˆ«
â”‚   â”œâ”€â”€ è¿›åº¦æ¡: [=====>    ] 50%
â”‚   â”œâ”€â”€ Spinner: â ‹â ™â ¹â ¸
â”‚   â”œâ”€â”€ è®¡æ•°å™¨: 5/10, 50%
â”‚   â””â”€â”€ æ—¶é—´ä¼°è®¡: ETA: 2m
â”‚
â”œâ”€â”€ 2.3.3 çŠ¶æ€æŒ‡ç¤ºå™¨è¯†åˆ«
â”‚   â”œâ”€â”€ æˆåŠŸ: âœ“ âœ” PASS OK SUCCESS
â”‚   â”œâ”€â”€ å¤±è´¥: âœ— âœ˜ FAIL ERROR FAILED
â”‚   â”œâ”€â”€ è­¦å‘Š: âš  WARNING WARN
â”‚   â””â”€â”€ ä¿¡æ¯: â„¹ INFO NOTE
â”‚
â””â”€â”€ 2.3.4 äº¤äº’æç¤ºè¯†åˆ«
    â”œâ”€â”€ ç¡®è®¤: [y/n] (yes/no) ç¡®è®¤?
    â”œâ”€â”€ é€‰æ‹©: 1) 2) 3) è¯·é€‰æ‹©
    â”œâ”€â”€ è¾“å…¥: Enter xxx: è¯·è¾“å…¥
    â””â”€â”€ ç­‰å¾…: Press any key...
```

### 2.4 ä¸Šä¸‹æ–‡èåˆå™¨

**æ–‡ä»¶**: `context_fusion.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 2.4.1 å¤šæºä¿¡æ¯èåˆ
â”‚   â”œâ”€â”€ ç»ˆç«¯è¾“å‡º
â”‚   â”œâ”€â”€ æ–‡ä»¶å˜æ›´
â”‚   â”œâ”€â”€ Git çŠ¶æ€
â”‚   â”œâ”€â”€ é¡¹ç›®ç»“æ„
â”‚   â””â”€â”€ å†å²å†³ç­–
â”‚
â”œâ”€â”€ 2.4.2 ä¿¡æ¯ä¼˜å…ˆçº§æ’åº
â”‚   â”œâ”€â”€ é”™è¯¯ä¿¡æ¯ > è­¦å‘Š > æ™®é€šè¾“å‡º
â”‚   â”œâ”€â”€ æœ€æ–°ä¿¡æ¯ > å†å²ä¿¡æ¯
â”‚   â””â”€â”€ ç›®æ ‡ç›¸å…³ > ç›®æ ‡æ— å…³
â”‚
â”œâ”€â”€ 2.4.3 ä¸Šä¸‹æ–‡å‹ç¼©
â”‚   â”œâ”€â”€ å»é‡
â”‚   â”œâ”€â”€ æ‘˜è¦
â”‚   â””â”€â”€ å…³é”®ä¿¡æ¯æå–
â”‚
â””â”€â”€ 2.4.4 ä¸Šä¸‹æ–‡æ ¼å¼åŒ–
    â”œâ”€â”€ ä¸º LLM ä¼˜åŒ–çš„æ ¼å¼
    â”œâ”€â”€ åˆ†æ®µæ ‡è®°
    â””â”€â”€ é‡è¦æ€§æ ‡æ³¨
```

---

## Phase 3: é•¿ç¨‹æ¨ç†ç³»ç»Ÿ

> **ä¼˜å…ˆçº§**: ğŸŸ¡ é‡è¦
> **é¢„è®¡å·¥æœŸ**: 2-3 å‘¨
> **ä¾èµ–**: Phase 1, Phase 2

### 3.1 å› æœé“¾è¿½è¸ªå™¨

**æ–‡ä»¶**: `causal_tracker.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 3.1.1 äº‹ä»¶æ•è·
â”‚   â”œâ”€â”€ å‘½ä»¤æ‰§è¡Œäº‹ä»¶
â”‚   â”œâ”€â”€ è¾“å‡ºå˜åŒ–äº‹ä»¶
â”‚   â”œâ”€â”€ æ–‡ä»¶å˜æ›´äº‹ä»¶
â”‚   â””â”€â”€ çŠ¶æ€è½¬æ¢äº‹ä»¶
â”‚
â”œâ”€â”€ 3.1.2 å› æœå…³ç³»æ¨æ–­
â”‚   â”œâ”€â”€ æ—¶åºå…³è”: A å‘ç”Ÿå B å‘ç”Ÿ
â”‚   â”œâ”€â”€ å†…å®¹å…³è”: A çš„è¾“å‡ºåŒ…å«åœ¨ B çš„è¾“å…¥ä¸­
â”‚   â””â”€â”€ é€»è¾‘å…³è”: A æ˜¯ B çš„å‰ç½®æ¡ä»¶
â”‚
â”œâ”€â”€ 3.1.3 å› æœé“¾å­˜å‚¨
â”‚   â”œâ”€â”€ å›¾ç»“æ„å­˜å‚¨
â”‚   â”œâ”€â”€ æ”¯æŒæ­£å‘/åå‘æŸ¥è¯¢
â”‚   â””â”€â”€ æ”¯æŒé“¾è·¯å‰ªæ
â”‚
â””â”€â”€ 3.1.4 å› æœé“¾æŸ¥è¯¢
    â”œâ”€â”€ "è¿™ä¸ªé”™è¯¯æ˜¯ç”±ä»€ä¹ˆå¼•èµ·çš„ï¼Ÿ"
    â”œâ”€â”€ "è¿™ä¸ªæ”¹åŠ¨ä¼šå½±å“ä»€ä¹ˆï¼Ÿ"
    â””â”€â”€ "å›åˆ°æ­£å¸¸çŠ¶æ€éœ€è¦æ’¤é”€ä»€ä¹ˆï¼Ÿ"
```

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE causal_events (
    event_id TEXT PRIMARY KEY,
    session_id TEXT,
    event_type TEXT,                  -- command/output/file_change/state_change
    event_data TEXT,                  -- JSON: äº‹ä»¶è¯¦æƒ…
    timestamp INTEGER
);

CREATE TABLE causal_links (
    link_id TEXT PRIMARY KEY,
    cause_event_id TEXT,
    effect_event_id TEXT,
    link_type TEXT,                   -- temporal/content/logical
    confidence REAL,
    FOREIGN KEY (cause_event_id) REFERENCES causal_events(event_id),
    FOREIGN KEY (effect_event_id) REFERENCES causal_events(event_id)
);
```

### 3.2 å·¥ä½œè®°å¿†ç®¡ç†å™¨

**æ–‡ä»¶**: `working_memory.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 3.2.1 çŸ­æœŸè®°å¿† (å½“å‰ä¼šè¯)
â”‚   â”œâ”€â”€ æœ€è¿‘ N æ¡å‘½ä»¤
â”‚   â”œâ”€â”€ æœ€è¿‘ N æ¡è¾“å‡º
â”‚   â”œâ”€â”€ å½“å‰ç›®æ ‡çŠ¶æ€
â”‚   â””â”€â”€ å½“å‰é˜»å¡ç‚¹
â”‚
â”œâ”€â”€ 3.2.2 è®°å¿†å®¹é‡ç®¡ç†
â”‚   â”œâ”€â”€ åŸºäºé‡è¦æ€§çš„æ·˜æ±°
â”‚   â”œâ”€â”€ åŸºäºç›¸å…³æ€§çš„ä¿ç•™
â”‚   â””â”€â”€ åŠ¨æ€å®¹é‡è°ƒæ•´
â”‚
â”œâ”€â”€ 3.2.3 è®°å¿†æ£€ç´¢
â”‚   â”œâ”€â”€ æŒ‰æ—¶é—´æ£€ç´¢
â”‚   â”œâ”€â”€ æŒ‰ç›¸å…³æ€§æ£€ç´¢
â”‚   â””â”€â”€ æŒ‰ç±»å‹æ£€ç´¢
â”‚
â””â”€â”€ 3.2.4 è®°å¿†æ‘˜è¦
    â”œâ”€â”€ è‡ªåŠ¨ç”Ÿæˆé˜¶æ®µæ‘˜è¦
    â”œâ”€â”€ å…³é”®ä¿¡æ¯æå–
    â””â”€â”€ ä¸Šä¸‹æ–‡å‹ç¼©
```

### 3.3 è·¨ä¼šè¯å…³è”å™¨

**æ–‡ä»¶**: `session_linker.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 3.3.1 ä¼šè¯ç›¸ä¼¼åº¦è®¡ç®—
â”‚   â”œâ”€â”€ åŸºäºé¡¹ç›®è·¯å¾„
â”‚   â”œâ”€â”€ åŸºäºä»»åŠ¡æ„å›¾
â”‚   â””â”€â”€ åŸºäºé”™è¯¯æ¨¡å¼
â”‚
â”œâ”€â”€ 3.3.2 çŸ¥è¯†è¿ç§»
â”‚   â”œâ”€â”€ ä»ç›¸ä¼¼ä¼šè¯æå–æœ‰ç”¨ä¿¡æ¯
â”‚   â”œâ”€â”€ é”™è¯¯ä¿®å¤ç»éªŒå¤ç”¨
â”‚   â””â”€â”€ æˆåŠŸç­–ç•¥å¤ç”¨
â”‚
â”œâ”€â”€ 3.3.3 é¡¹ç›®çŸ¥è¯†åº“
â”‚   â”œâ”€â”€ é¡¹ç›®çº§åˆ«çš„ç»éªŒç§¯ç´¯
â”‚   â”œâ”€â”€ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ
â”‚   â””â”€â”€ æœ€ä½³å®è·µåº“
â”‚
â””â”€â”€ 3.3.4 è·¨é¡¹ç›®å­¦ä¹ 
    â”œâ”€â”€ é€šç”¨æ¨¡å¼æå–
    â”œâ”€â”€ è¯­è¨€/æ¡†æ¶ç‰¹å®šç»éªŒ
    â””â”€â”€ é”™è¯¯ç±»å‹é€šç”¨å¤„ç†
```

---

## Phase 4: å­¦ä¹ ä¸é€‚åº”

> **ä¼˜å…ˆçº§**: ğŸŸ¡ é‡è¦
> **é¢„è®¡å·¥æœŸ**: 3-4 å‘¨
> **ä¾èµ–**: Phase 1, Phase 2, Phase 3

### 4.1 æ¨¡å¼å­¦ä¹ å¼•æ“

**æ–‡ä»¶**: `pattern_learner.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 4.1.1 æˆåŠŸæ¨¡å¼æå–
â”‚   â”œâ”€â”€ è¾“å…¥æ¨¡å¼: ä»€ä¹ˆæƒ…å†µä¸‹é‡‡å–è¡ŒåŠ¨
â”‚   â”œâ”€â”€ è¡ŒåŠ¨æ¨¡å¼: é‡‡å–äº†ä»€ä¹ˆè¡ŒåŠ¨
â”‚   â”œâ”€â”€ ç»“æœæ¨¡å¼: è·å¾—äº†ä»€ä¹ˆç»“æœ
â”‚   â””â”€â”€ ä¸Šä¸‹æ–‡æ¨¡å¼: åœ¨ä»€ä¹ˆä¸Šä¸‹æ–‡ä¸­æœ‰æ•ˆ
â”‚
â”œâ”€â”€ 4.1.2 å¤±è´¥æ¨¡å¼æå–
â”‚   â”œâ”€â”€ å¤±è´¥ç‰¹å¾è¯†åˆ«
â”‚   â”œâ”€â”€ å¤±è´¥åŸå› åˆ†ç±»
â”‚   â””â”€â”€ è§„é¿ç­–ç•¥ç”Ÿæˆ
â”‚
â”œâ”€â”€ 4.1.3 æ¨¡å¼å­˜å‚¨
â”‚   â”œâ”€â”€ æ¨¡å¼æŒ‡çº¹ (ç”¨äºå¿«é€ŸåŒ¹é…)
â”‚   â”œâ”€â”€ æ¨¡å¼ç½®ä¿¡åº¦
â”‚   â””â”€â”€ æ¨¡å¼ä½¿ç”¨ç»Ÿè®¡
â”‚
â””â”€â”€ 4.1.4 æ¨¡å¼åº”ç”¨
    â”œâ”€â”€ å½“å‰æƒ…å†µåŒ¹é…
    â”œâ”€â”€ å»ºè®®æ’åº
    â””â”€â”€ æ•ˆæœåé¦ˆæ”¶é›†
```

**æ•°æ®ç»“æ„**:
```sql
CREATE TABLE learned_patterns (
    pattern_id TEXT PRIMARY KEY,
    pattern_type TEXT,                -- success/failure/neutral
    trigger_signature TEXT,           -- è§¦å‘æ¡ä»¶ç‰¹å¾
    action_template TEXT,             -- è¡ŒåŠ¨æ¨¡æ¿
    expected_outcome TEXT,            -- é¢„æœŸç»“æœ
    context_constraints TEXT,         -- JSON: é€‚ç”¨ä¸Šä¸‹æ–‡
    success_count INTEGER DEFAULT 0,
    failure_count INTEGER DEFAULT 0,
    confidence REAL,
    last_used INTEGER,
    created_at INTEGER
);
```

### 4.2 ç­–ç•¥ä¼˜åŒ–å™¨

**æ–‡ä»¶**: `strategy_optimizer.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 4.2.1 ç­–ç•¥è¯„ä¼°
â”‚   â”œâ”€â”€ æˆåŠŸç‡è®¡ç®—
â”‚   â”œâ”€â”€ æ•ˆç‡è¯„ä¼° (è€—æ—¶)
â”‚   â””â”€â”€ é£é™©è¯„ä¼°
â”‚
â”œâ”€â”€ 4.2.2 ç­–ç•¥è°ƒæ•´
â”‚   â”œâ”€â”€ åŸºäºåé¦ˆçš„å‚æ•°è°ƒæ•´
â”‚   â”œâ”€â”€ ç­–ç•¥ç»„åˆä¼˜åŒ–
â”‚   â””â”€â”€ æ–°ç­–ç•¥ç”Ÿæˆ
â”‚
â”œâ”€â”€ 4.2.3 A/B æµ‹è¯•
â”‚   â”œâ”€â”€ å¤šç­–ç•¥å¹¶è¡Œæµ‹è¯•
â”‚   â”œâ”€â”€ æ•ˆæœå¯¹æ¯”
â”‚   â””â”€â”€ æœ€ä¼˜ç­–ç•¥é€‰æ‹©
â”‚
â””â”€â”€ 4.2.4 ç­–ç•¥é€€åŒ–æ£€æµ‹
    â”œâ”€â”€ ç›‘æ§ç­–ç•¥æœ‰æ•ˆæ€§å˜åŒ–
    â”œâ”€â”€ ç¯å¢ƒå˜åŒ–æ£€æµ‹
    â””â”€â”€ ç­–ç•¥é‡æ–°è®­ç»ƒè§¦å‘
```

### 4.3 åé¦ˆæ”¶é›†å™¨

**æ–‡ä»¶**: `feedback_collector.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 4.3.1 éšå¼åé¦ˆ
â”‚   â”œâ”€â”€ å‘½ä»¤æ˜¯å¦è¢«æ‰§è¡Œ
â”‚   â”œâ”€â”€ æ‰§è¡Œåè¾“å‡ºå˜åŒ–
â”‚   â””â”€â”€ åç»­è¡Œä¸º
â”‚
â”œâ”€â”€ 4.3.2 æ˜¾å¼åé¦ˆ
â”‚   â”œâ”€â”€ ç”¨æˆ·ä¸­æ–­/è¦†ç›–
â”‚   â”œâ”€â”€ ç”¨æˆ·è¯„ä»·
â”‚   â””â”€â”€ ç”¨æˆ·ä¿®æ­£
â”‚
â”œâ”€â”€ 4.3.3 åé¦ˆå½’å› 
â”‚   â”œâ”€â”€ åé¦ˆå±äºå“ªä¸ªå†³ç­–
â”‚   â”œâ”€â”€ åé¦ˆå±äºå“ªä¸ªæ¨¡å¼
â”‚   â””â”€â”€ åé¦ˆæƒé‡è®¡ç®—
â”‚
â””â”€â”€ 4.3.4 åé¦ˆåº”ç”¨
    â”œâ”€â”€ æ›´æ–°æ¨¡å¼ç½®ä¿¡åº¦
    â”œâ”€â”€ è§¦å‘ç­–ç•¥è°ƒæ•´
    â””â”€â”€ ç”Ÿæˆå­¦ä¹ æŠ¥å‘Š
```

---

## Phase 5: ä¸»åŠ¨è§„åˆ’èƒ½åŠ›

> **ä¼˜å…ˆçº§**: ğŸŸ¡ é‡è¦
> **é¢„è®¡å·¥æœŸ**: 2-3 å‘¨
> **ä¾èµ–**: Phase 1, Phase 2, Phase 3, Phase 4

### 5.1 ä¸»åŠ¨å¹²é¢„å¼•æ“

**æ–‡ä»¶**: `proactive_engine.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 5.1.1 å¹²é¢„æ—¶æœºè¯†åˆ«
â”‚   â”œâ”€â”€ æ–¹å‘åç¦»æ£€æµ‹
â”‚   â”œâ”€â”€ æ•ˆç‡ä½ä¸‹æ£€æµ‹
â”‚   â”œâ”€â”€ é£é™©å‡çº§æ£€æµ‹
â”‚   â””â”€â”€ æœºä¼šçª—å£è¯†åˆ«
â”‚
â”œâ”€â”€ 5.1.2 å¹²é¢„ç­–ç•¥é€‰æ‹©
â”‚   â”œâ”€â”€ æ¸©å’Œæé†’
â”‚   â”œâ”€â”€ å»ºè®®æ›¿ä»£æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ å¼ºåˆ¶çº å
â”‚   â””â”€â”€ æš‚åœç­‰å¾…äººå·¥
â”‚
â”œâ”€â”€ 5.1.3 å¹²é¢„æ‰§è¡Œ
â”‚   â”œâ”€â”€ å¹²é¢„å‘½ä»¤ç”Ÿæˆ
â”‚   â”œâ”€â”€ å¹²é¢„æ—¶æœºæŠŠæ§
â”‚   â””â”€â”€ å¹²é¢„æ•ˆæœç›‘æ§
â”‚
â””â”€â”€ 5.1.4 å¹²é¢„åé¦ˆå­¦ä¹ 
    â”œâ”€â”€ å¹²é¢„æ˜¯å¦æœ‰æ•ˆ
    â”œâ”€â”€ å¹²é¢„æ—¶æœºæ˜¯å¦æ°å½“
    â””â”€â”€ å¹²é¢„å¼ºåº¦æ˜¯å¦åˆé€‚
```

### 5.2 è§„åˆ’ç”Ÿæˆå™¨

**æ–‡ä»¶**: `plan_generator.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 5.2.1 è®¡åˆ’ç”Ÿæˆ
â”‚   â”œâ”€â”€ åŸºäºç›®æ ‡çš„è®¡åˆ’ç”Ÿæˆ
â”‚   â”œâ”€â”€ åŸºäºå½“å‰çŠ¶æ€çš„è°ƒæ•´
â”‚   â””â”€â”€ åŸºäºçº¦æŸçš„ä¼˜åŒ–
â”‚
â”œâ”€â”€ 5.2.2 è®¡åˆ’éªŒè¯
â”‚   â”œâ”€â”€ å¯è¡Œæ€§æ£€æŸ¥
â”‚   â”œâ”€â”€ ä¾èµ–æ£€æŸ¥
â”‚   â””â”€â”€ é£é™©è¯„ä¼°
â”‚
â”œâ”€â”€ 5.2.3 è®¡åˆ’æ‰§è¡Œç›‘æ§
â”‚   â”œâ”€â”€ è®¡åˆ’è¿›åº¦è¿½è¸ª
â”‚   â”œâ”€â”€ åç¦»æ£€æµ‹
â”‚   â””â”€â”€ åŠ¨æ€è°ƒæ•´
â”‚
â””â”€â”€ 5.2.4 è®¡åˆ’ä¼˜åŒ–
    â”œâ”€â”€ åŸºäºæ‰§è¡Œåé¦ˆ
    â”œâ”€â”€ åŸºäºæ–°ä¿¡æ¯
    â””â”€â”€ åŸºäºç¯å¢ƒå˜åŒ–
```

### 5.3 å†³ç­–ä»²è£å™¨

**æ–‡ä»¶**: `decision_arbiter.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 5.3.1 å¤šæºå»ºè®®æ•´åˆ
â”‚   â”œâ”€â”€ æ¥è‡ªæ¨¡å¼åŒ¹é…çš„å»ºè®®
â”‚   â”œâ”€â”€ æ¥è‡ª LLM çš„å»ºè®®
â”‚   â”œâ”€â”€ æ¥è‡ªè§„åˆ’çš„å»ºè®®
â”‚   â””â”€â”€ æ¥è‡ªäººç±»çš„æŒ‡ç¤º
â”‚
â”œâ”€â”€ 5.3.2 å†²çªè§£å†³
â”‚   â”œâ”€â”€ ä¼˜å…ˆçº§æ’åº
â”‚   â”œâ”€â”€ ç½®ä¿¡åº¦åŠ æƒ
â”‚   â””â”€â”€ å®‰å…¨æ€§ä¼˜å…ˆ
â”‚
â”œâ”€â”€ 5.3.3 æœ€ç»ˆå†³ç­–
â”‚   â”œâ”€â”€ å†³ç­–ç¡®å®š
â”‚   â”œâ”€â”€ å†³ç­–è§£é‡Šç”Ÿæˆ
â”‚   â””â”€â”€ å†³ç­–æ‰§è¡Œ
â”‚
â””â”€â”€ 5.3.4 å†³ç­–å®¡è®¡
    â”œâ”€â”€ å†³ç­–æ—¥å¿—
    â”œâ”€â”€ å†³ç­–è¿½æº¯
    â””â”€â”€ å†³ç­–æ”¹è¿›å»ºè®®
```

---

## Phase 6: å·¥å…·ä½¿ç”¨æ‰©å±•

> **ä¼˜å…ˆçº§**: ğŸŸ¢ å¢å¼º
> **é¢„è®¡å·¥æœŸ**: 2-3 å‘¨
> **ä¾èµ–**: Phase 1, Phase 2

### 6.1 æ–‡ä»¶ç³»ç»Ÿå·¥å…·

**æ–‡ä»¶**: `tools/file_tool.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 6.1.1 æ–‡ä»¶è¯»å–
â”‚   â”œâ”€â”€ è¯»å–æŒ‡å®šæ–‡ä»¶
â”‚   â”œâ”€â”€ è¯»å–æŒ‡å®šè¡ŒèŒƒå›´
â”‚   â””â”€â”€ æœç´¢æ–‡ä»¶å†…å®¹
â”‚
â”œâ”€â”€ 6.1.2 æ–‡ä»¶åˆ†æ
â”‚   â”œâ”€â”€ ä»£ç ç»“æ„åˆ†æ
â”‚   â”œâ”€â”€ ä¾èµ–å…³ç³»åˆ†æ
â”‚   â””â”€â”€ å˜æ›´å½±å“åˆ†æ
â”‚
â”œâ”€â”€ 6.1.3 æ–‡ä»¶æ“ä½œå»ºè®®
â”‚   â”œâ”€â”€ ä¸ç›´æ¥æ“ä½œï¼Œåªç”Ÿæˆå»ºè®®
â”‚   â”œâ”€â”€ ç”Ÿæˆ diff/patch
â”‚   â””â”€â”€ ç”Ÿæˆå‘½ä»¤åºåˆ—
â”‚
â””â”€â”€ 6.1.4 å®‰å…¨æ§åˆ¶
    â”œâ”€â”€ åªè¯»æ¨¡å¼
    â”œâ”€â”€ æ•æ„Ÿæ–‡ä»¶ä¿æŠ¤
    â””â”€â”€ æ“ä½œå®¡è®¡
```

### 6.2 æœç´¢å·¥å…·

**æ–‡ä»¶**: `tools/search_tool.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 6.2.1 ä»£ç æœç´¢
â”‚   â”œâ”€â”€ ç¬¦å·æœç´¢ (å‡½æ•°/ç±»/å˜é‡)
â”‚   â”œâ”€â”€ å¼•ç”¨æœç´¢
â”‚   â””â”€â”€ æ¨¡å¼æœç´¢
â”‚
â”œâ”€â”€ 6.2.2 æ–‡æ¡£æœç´¢
â”‚   â”œâ”€â”€ é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ åœ¨çº¿æ–‡æ¡£ (å¯é€‰)
â”‚   â””â”€â”€ é”™è¯¯ä¿¡æ¯æœç´¢
â”‚
â”œâ”€â”€ 6.2.3 å†å²æœç´¢
â”‚   â”œâ”€â”€ å†³ç­–å†å²æœç´¢
â”‚   â”œâ”€â”€ é”™è¯¯å†å²æœç´¢
â”‚   â””â”€â”€ æ¨¡å¼æœç´¢
â”‚
â””â”€â”€ 6.2.4 ç»“æœæ’åº
    â”œâ”€â”€ ç›¸å…³æ€§æ’åº
    â”œâ”€â”€ æ—¶é—´æ’åº
    â””â”€â”€ é‡è¦æ€§æ’åº
```

### 6.3 å·¥å…·è°ƒåº¦å™¨

**æ–‡ä»¶**: `tool_dispatcher.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 6.3.1 å·¥å…·æ³¨å†Œ
â”‚   â”œâ”€â”€ å·¥å…·èƒ½åŠ›æè¿°
â”‚   â”œâ”€â”€ å·¥å…·è¾“å…¥è¾“å‡ºè§„èŒƒ
â”‚   â””â”€â”€ å·¥å…·æƒé™è¦æ±‚
â”‚
â”œâ”€â”€ 6.3.2 å·¥å…·é€‰æ‹©
â”‚   â”œâ”€â”€ æ ¹æ®éœ€æ±‚é€‰æ‹©å·¥å…·
â”‚   â”œâ”€â”€ å·¥å…·ç»„åˆç¼–æ’
â”‚   â””â”€â”€ å¤‡é€‰å·¥å…·å‡†å¤‡
â”‚
â”œâ”€â”€ 6.3.3 å·¥å…·è°ƒç”¨
â”‚   â”œâ”€â”€ å‚æ•°å‡†å¤‡
â”‚   â”œâ”€â”€ è°ƒç”¨æ‰§è¡Œ
â”‚   â””â”€â”€ ç»“æœå¤„ç†
â”‚
â””â”€â”€ 6.3.4 å·¥å…·ç›‘æ§
    â”œâ”€â”€ è°ƒç”¨ç»Ÿè®¡
    â”œâ”€â”€ é”™è¯¯ç»Ÿè®¡
    â””â”€â”€ æ€§èƒ½ç›‘æ§
```

---

## Phase 7: äººæœºåä½œå¢å¼º

> **ä¼˜å…ˆçº§**: ğŸŸ¢ å¢å¼º
> **é¢„è®¡å·¥æœŸ**: 2 å‘¨
> **ä¾èµ–**: Phase 1, Phase 5

### 7.1 åå•†å¯¹è¯ç³»ç»Ÿ

**æ–‡ä»¶**: `negotiation_dialog.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 7.1.1 ä¸ç¡®å®šæ€§è¡¨è¾¾
â”‚   â”œâ”€â”€ ç½®ä¿¡åº¦æ˜¾ç¤º
â”‚   â”œâ”€â”€ å¤šæ–¹æ¡ˆå‘ˆç°
â”‚   â””â”€â”€ é£é™©è¯´æ˜
â”‚
â”œâ”€â”€ 7.1.2 ç¡®è®¤è¯·æ±‚
â”‚   â”œâ”€â”€ é«˜é£é™©æ“ä½œç¡®è®¤
â”‚   â”œâ”€â”€ æ–¹å‘æ€§å†³ç­–ç¡®è®¤
â”‚   â””â”€â”€ èµ„æºæ¶ˆè€—ç¡®è®¤
â”‚
â”œâ”€â”€ 7.1.3 æ¾„æ¸…è¯·æ±‚
â”‚   â”œâ”€â”€ æ¨¡ç³Šæ„å›¾æ¾„æ¸…
â”‚   â”œâ”€â”€ çº¦æŸæ¡ä»¶æ¾„æ¸…
â”‚   â””â”€â”€ ä¼˜å…ˆçº§æ¾„æ¸…
â”‚
â””â”€â”€ 7.1.4 åé¦ˆæ”¶é›†
    â”œâ”€â”€ æ»¡æ„åº¦åé¦ˆ
    â”œâ”€â”€ æ”¹è¿›å»ºè®®
    â””â”€â”€ çº é”™åé¦ˆ
```

### 7.2 çŠ¶æ€å¯è§†åŒ–

**æ–‡ä»¶**: `status_visualizer.py`

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 7.2.1 å®æ—¶çŠ¶æ€é¢æ¿
â”‚   â”œâ”€â”€ å½“å‰ç›®æ ‡è¿›åº¦
â”‚   â”œâ”€â”€ å½“å‰é˜¶æ®µ
â”‚   â”œâ”€â”€ æœ€è¿‘å†³ç­–
â”‚   â””â”€â”€ å¥åº·æŒ‡æ ‡
â”‚
â”œâ”€â”€ 7.2.2 å†å²æ—¶é—´çº¿
â”‚   â”œâ”€â”€ äº‹ä»¶æ—¶é—´çº¿
â”‚   â”œâ”€â”€ å†³ç­–æ—¶é—´çº¿
â”‚   â””â”€â”€ è¿›åº¦æ—¶é—´çº¿
â”‚
â”œâ”€â”€ 7.2.3 è¯Šæ–­é¢æ¿
â”‚   â”œâ”€â”€ é”™è¯¯ç»Ÿè®¡
â”‚   â”œâ”€â”€ é˜»å¡åˆ†æ
â”‚   â””â”€â”€ æ€§èƒ½æŒ‡æ ‡
â”‚
â””â”€â”€ 7.2.4 æŠ¥å‘Šç”Ÿæˆ
    â”œâ”€â”€ ä¼šè¯æŠ¥å‘Š
    â”œâ”€â”€ é¡¹ç›®æŠ¥å‘Š
    â””â”€â”€ å­¦ä¹ æŠ¥å‘Š
```

### 7.3 æ™ºèƒ½é€šçŸ¥ç³»ç»Ÿ

**æ–‡ä»¶**: `smart_notifier.py` (æ‰©å±•ç°æœ‰ notification_hub.py)

```
åŠŸèƒ½æ ‘ (DFS):
â”œâ”€â”€ 7.3.1 é€šçŸ¥æ™ºèƒ½è¿‡æ»¤
â”‚   â”œâ”€â”€ é‡å¤é€šçŸ¥åˆå¹¶
â”‚   â”œâ”€â”€ ä½ä¼˜å…ˆçº§é€šçŸ¥å»¶è¿Ÿ
â”‚   â””â”€â”€ ä¸Šä¸‹æ–‡ç›¸å…³é€šçŸ¥èšåˆ
â”‚
â”œâ”€â”€ 7.3.2 é€šçŸ¥æ—¶æœºä¼˜åŒ–
â”‚   â”œâ”€â”€ ç”¨æˆ·æ´»è·ƒåº¦æ„ŸçŸ¥
â”‚   â”œâ”€â”€ ä»»åŠ¡å…³é”®èŠ‚ç‚¹
â”‚   â””â”€â”€ ç´§æ€¥ç¨‹åº¦åˆ¤æ–­
â”‚
â”œâ”€â”€ 7.3.3 é€šçŸ¥å†…å®¹ä¼˜åŒ–
â”‚   â”œâ”€â”€ ç®€æ´æ‘˜è¦
â”‚   â”œâ”€â”€ å¯æ“ä½œå»ºè®®
â”‚   â””â”€â”€ ä¸Šä¸‹æ–‡é“¾æ¥
â”‚
â””â”€â”€ 7.3.4 é€šçŸ¥åé¦ˆå­¦ä¹ 
    â”œâ”€â”€ é€šçŸ¥æ‰“å¼€ç‡
    â”œâ”€â”€ é€šçŸ¥å“åº”æ—¶é—´
    â””â”€â”€ é€šçŸ¥æœ‰æ•ˆæ€§è¯„ä¼°
```

---

## å®æ–½ä¼˜å…ˆçº§çŸ©é˜µ

### é«˜å½±å“ + ä½å¤æ‚åº¦ (ç«‹å³å®æ–½)

| åŠŸèƒ½ | Phase | é¢„è®¡å·¥æœŸ | å½±å“ |
|------|-------|----------|------|
| æ„å›¾è§£æå™¨ | 1.1 | 1 å‘¨ | ğŸ”´ |
| é”™è¯¯è¯­ä¹‰åˆ†æå™¨ | 2.1 | 1 å‘¨ | ğŸ”´ |
| è¿›åº¦ç›‘æ§å™¨ | 1.3 | 0.5 å‘¨ | ğŸ”´ |
| è¾“å‡ºæ¨¡å¼è¯†åˆ«å™¨ | 2.3 | 0.5 å‘¨ | ğŸŸ¡ |

### é«˜å½±å“ + é«˜å¤æ‚åº¦ (é‡ç‚¹æ”»å…³)

| åŠŸèƒ½ | Phase | é¢„è®¡å·¥æœŸ | å½±å“ |
|------|-------|----------|------|
| ç›®æ ‡åˆ†è§£å¼•æ“ | 1.2 | 1.5 å‘¨ | ğŸ”´ |
| å› æœé“¾è¿½è¸ªå™¨ | 3.1 | 1.5 å‘¨ | ğŸŸ¡ |
| æ¨¡å¼å­¦ä¹ å¼•æ“ | 4.1 | 2 å‘¨ | ğŸŸ¡ |
| ä¸»åŠ¨å¹²é¢„å¼•æ“ | 5.1 | 1.5 å‘¨ | ğŸŸ¡ |

### ä½å½±å“ + ä½å¤æ‚åº¦ (é¡ºä¾¿å®æ–½)

| åŠŸèƒ½ | Phase | é¢„è®¡å·¥æœŸ | å½±å“ |
|------|-------|----------|------|
| çŠ¶æ€å¯è§†åŒ– | 7.2 | 0.5 å‘¨ | ğŸŸ¢ |
| æ™ºèƒ½é€šçŸ¥ç³»ç»Ÿ | 7.3 | 0.5 å‘¨ | ğŸŸ¢ |

### ä½å½±å“ + é«˜å¤æ‚åº¦ (å»¶åå®æ–½)

| åŠŸèƒ½ | Phase | é¢„è®¡å·¥æœŸ | å½±å“ |
|------|-------|----------|------|
| è·¨é¡¹ç›®å­¦ä¹  | 3.3.4 | 2 å‘¨ | ğŸŸ¢ |
| A/B æµ‹è¯• | 4.2.3 | 1.5 å‘¨ | ğŸŸ¢ |

---

## æ¨èå®æ–½é¡ºåº

```
Week 1-2:   1.1 æ„å›¾è§£æå™¨ + 1.3 è¿›åº¦ç›‘æ§å™¨
    â†“
Week 3-4:   2.1 é”™è¯¯è¯­ä¹‰åˆ†æå™¨ + 2.3 è¾“å‡ºæ¨¡å¼è¯†åˆ«å™¨
    â†“
Week 5-6:   1.2 ç›®æ ‡åˆ†è§£å¼•æ“ + 2.4 ä¸Šä¸‹æ–‡èåˆå™¨
    â†“
Week 7-8:   3.1 å› æœé“¾è¿½è¸ªå™¨ + 3.2 å·¥ä½œè®°å¿†ç®¡ç†å™¨
    â†“
Week 9-10:  4.1 æ¨¡å¼å­¦ä¹ å¼•æ“ + 4.3 åé¦ˆæ”¶é›†å™¨
    â†“
Week 11-12: 5.1 ä¸»åŠ¨å¹²é¢„å¼•æ“ + 5.3 å†³ç­–ä»²è£å™¨
    â†“
Week 13-14: 6.x å·¥å…·ä½¿ç”¨æ‰©å±•
    â†“
Week 15-16: 7.x äººæœºåä½œå¢å¼º
```

---

## æˆåŠŸæŒ‡æ ‡

### é‡åŒ–æŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|------|------|------|----------|
| ä»»åŠ¡å®Œæˆç‡ | ~30% | >70% | è‡ªåŠ¨å®Œæˆçš„ä»»åŠ¡æ•° / æ€»ä»»åŠ¡æ•° |
| å¹²é¢„å‡†ç¡®ç‡ | ~50% | >80% | æœ‰æ•ˆå¹²é¢„æ•° / æ€»å¹²é¢„æ•° |
| é‡å¤æŒ‡ä»¤ç‡ | ~20% | <5% | é‡å¤æŒ‡ä»¤æ•° / æ€»æŒ‡ä»¤æ•° |
| äººå·¥ä»‹å…¥ç‡ | ~40% | <15% | éœ€äººå·¥ä»‹å…¥æ¬¡æ•° / æ€»å†³ç­–æ¬¡æ•° |
| é”™è¯¯ä¿®å¤ç‡ | ~20% | >60% | è‡ªåŠ¨ä¿®å¤é”™è¯¯æ•° / æ€»é”™è¯¯æ•° |

### è´¨æ€§æŒ‡æ ‡

- [ ] èƒ½ç†è§£"å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½"è¿™æ ·çš„é«˜å±‚æ„å›¾
- [ ] èƒ½åœ¨å¡ä½æ—¶ä¸»åŠ¨å°è¯•ä¸åŒæ–¹æ³•
- [ ] èƒ½ä»å†å²é”™è¯¯ä¸­å­¦ä¹ é¿å…é‡è¹ˆè¦†è¾™
- [ ] èƒ½ä¸»åŠ¨å‘ç°å¹¶æé†’æ½œåœ¨é—®é¢˜
- [ ] èƒ½ä¸äººç±»è¿›è¡Œæœ‰æ„ä¹‰çš„åå•†å¯¹è¯

---

## é™„å½•ï¼šæ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶

```
claude_monitor/
â”œâ”€â”€ intent_parser.py          # Phase 1.1
â”œâ”€â”€ goal_decomposer.py        # Phase 1.2
â”œâ”€â”€ progress_monitor.py       # Phase 1.3
â”œâ”€â”€ error_analyzer.py         # Phase 2.1
â”œâ”€â”€ change_analyzer.py        # Phase 2.2
â”œâ”€â”€ output_recognizer.py      # Phase 2.3
â”œâ”€â”€ context_fusion.py         # Phase 2.4
â”œâ”€â”€ causal_tracker.py         # Phase 3.1
â”œâ”€â”€ working_memory.py         # Phase 3.2
â”œâ”€â”€ session_linker.py         # Phase 3.3
â”œâ”€â”€ pattern_learner.py        # Phase 4.1
â”œâ”€â”€ strategy_optimizer.py     # Phase 4.2
â”œâ”€â”€ feedback_collector.py     # Phase 4.3
â”œâ”€â”€ proactive_engine.py       # Phase 5.1
â”œâ”€â”€ plan_generator.py         # Phase 5.2
â”œâ”€â”€ decision_arbiter.py       # Phase 5.3
â”œâ”€â”€ tool_dispatcher.py        # Phase 6.3
â”œâ”€â”€ negotiation_dialog.py     # Phase 7.1
â”œâ”€â”€ status_visualizer.py      # Phase 7.2
â”œâ”€â”€ smart_notifier.py         # Phase 7.3
â””â”€â”€ tools/
    â”œâ”€â”€ file_tool.py          # Phase 6.1
    â””â”€â”€ search_tool.py        # Phase 6.2
```

### ä¿®æ”¹æ–‡ä»¶

```
claude_monitor/
â”œâ”€â”€ smart-monitor.sh          # é›†æˆæ–°æ¨¡å—
â”œâ”€â”€ llm_supervisor.py         # æ‰©å±•ä¸Šä¸‹æ–‡å¤„ç†
â”œâ”€â”€ memory_manager.py         # æ‰©å±•æ•°æ®ç»“æ„
â””â”€â”€ prompts/*.txt             # æ›´æ–°æç¤ºè¯
```

---

*æœ€åæ›´æ–°: 2024-12*
